(function(){"use strict";function t(n){return Math.floor(Math.pow(10,Math.floor(n/3))*[1,2.5,5][n%3])}function i(n){if(n<1)return 0;var t=Math.floor(Math.log(n)/Math.LN10),i=n/(2.5*Math.pow(10,t));return i>=3&&(t++,i=0),3*t+Math.round(Math.min(2,i))}function r(n){return n===Infinity?Infinity:t(i(n))}function u(n){var t=n&&n.match(/^(\d+)-(\d+)\/(\d+|\*)$/);return t?{from:+t[1],to:+t[2],total:t[3]==="*"?Infinity:+t[3]}:n==="*/0"?{total:0}:null}function n(n){return n.to-n.from+1}angular.module("bgf.paginateAnything",[]).directive("bgfPagination",function(){var e=3,o=250,f=50;return{restrict:"AE",scope:{url:"=",collection:"=",urlParams:"=?",headers:"=?",page:"=?",perPage:"=?",perPagePresets:"=?",autoPresets:"=?",clientLimit:"=?",linkGroupSize:"=?",reloadPage:"=?",size:"=?",passive:"@",numPages:"=?",numItems:"=?",serverLimit:"=?",rangeFrom:"=?",rangeTo:"=?"},templateUrl:function(){return"/scripts/angular/pagination/src/paginate-anything.html"},replace:!0,controller:["$scope","$http",function(s,h){function l(r){s.$emit("pagination:loadStart",r);h({method:"GET",url:s.url,params:s.urlParams,headers:angular.extend({},s.headers,{"Range-Unit":"items",Range:[r.from,r.to].join("-")})}).success(function(e,o,h,c){var l=u(h("Content-Range")),a;o===204||l&&l.total===0?(s.numItems=0,s.collection=[]):(s.numItems=l?l.total:e.length,s.collection=e||[]);l&&(s.rangeFrom=l.from,s.rangeTo=l.to,n(l)<l.total&&(r.to<l.total-1||l.to<l.total-1&&l.total<r.to)&&(!s.perPage||n(l)<s.perPage)&&(s.autoPresets?(a=i(n(l)),t(a)>n(l)&&a--,s.serverLimit=t(a)):s.serverLimit=n(l),s.perPage=s.Math.min(s.serverLimit,s.clientLimit)));s.numPages=Math.ceil(s.numItems/(s.perPage||f));s.$emit("pagination:loadPage",o,c)}).error(function(n,t,i,r){s.$emit("pagination:error",t,r)})}var a,v,c;(s.reloadPage=!1,s.serverLimit=Infinity,s.Math=window.Math,typeof s.autoPresets!="boolean"&&(s.autoPresets=!0),a=s.linkGroupSize,v=s.clientLimit,s.linkGroupSize=typeof a=="number"?a:e,s.clientLimit=typeof v=="number"?v:o,s.updatePresets=function(){if(s.autoPresets){for(var r=[],n=Math.min(3,i(s.perPage||f));n<=i(Math.min(s.clientLimit,s.serverLimit));n++)r.push(t(n));s.perPagePresets=r}else s.perPagePresets=s.perPagePresets.filter(function(n){return n<=s.serverLimit}).concat([s.serverLimit])},s.gotoPage=function(n){s.page=n},s.linkGroupFirst=function(){var n=Math.max(0,s.linkGroupSize-(s.numPages-1-(s.page+2)));return Math.max(0,s.page-(s.linkGroupSize+n))},s.linkGroupLast=function(){var n=Math.max(0,s.linkGroupSize-(s.page-2));return Math.min(s.numPages-1,s.page+(s.linkGroupSize+n))},s.isFinite=function(){return s.numPages<Infinity},s.page=s.page||0,s.size=s.size||"md",s.autoPresets&&s.updatePresets(),s.$watch("page",function(n,t){if(s.passive!=="true"&&n!==t){if(n<0||n*s.perPage>=s.numItems)return;var i=s.perPage||f;s.autoPresets&&(i=r(i));l({from:n*i,to:(n+1)*i-1})}}),s.$watch("perPage",function(n,t){if(s.passive!=="true"&&typeof t=="number"&&n!==t){var r=s.page*t,i=Math.floor(r/n);s.page!==i?s.page=i:l({from:s.page*n,to:(s.page+1)*n-1})}}),s.$watch("serverLimit",function(n,t){s.passive!=="true"&&n!==t&&s.updatePresets()}),s.$watch("url",function(n,t){s.passive!=="true"&&n!==t&&(s.page===0?s.reloadPage=!0:s.page=0)}),s.$watch("urlParams",function(n,t){s.passive!=="true"&&(angular.equals(n,t)||(s.page===0?s.reloadPage=!0:s.page=0))},!0),s.$watch("headers",function(n,t){s.passive!=="true"&&(angular.equals(n,t)||(s.page===0?s.reloadPage=!0:s.page=0))},!0),s.$watch("reloadPage",function(n,t){s.passive!=="true"&&n===!0&&t===!1&&(s.reloadPage=!1,l({from:s.page*s.perPage,to:(s.page+1)*s.perPage-1}))}),s.passive!=="true")&&(c=s.perPage||f,s.autoPresets&&(c=r(c)),l({from:s.page*c,to:(s.page+1)*c-1}))}]}}).filter("makeRange",function(){return function(n){var i,r,u,t;switch(n.length){case 1:i=0;r=parseInt(n[0],10)-1;break;case 2:i=parseInt(n[0],10);r=parseInt(n[1],10);break;default:return n}for(u=[],t=i;t<=r;t++)u.push(t);return u}})})();